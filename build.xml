<?xml version="1.0" encoding="UTF-8"?>
<project name="name-of-project" default="">
    
    <target name="InitEnviroment" depends="Initialize Enviroment"/>
    <target name="Dependencies" depends="Dependencies, DropCreateUpdateDatabase"/>
    <target name="DropCreateUpdateDatabase" depends="DropCreateUpdateDatabase"/>
    
    <target name="InitEnviroment" description="Copy parameters">
        <exec executable="cp" failonerror="true">
            <arg path="app/config/parameters.template.yml" />
            <arg path="app/config/parameters.yml" />
        </exec>
        <exec executable="wget" failonerror="true">
            <arg value="-nc" />
            <arg value="http://getcomposer.org/composer.phar" />
        </exec>
    </target>
    
    <target name="Dependencies" description="Install Dependencies">
        <exec executable="php">
            <arg value="composer.phar" />
            <arg value="install" />
        </exec>      
    </target>
    
    <target name="DropCreateUpdateDatabase" description="Drop, Create and Update Database">
        <exec executable="php">
            <arg value="app/console" />
            <arg value="doctrine:database:drop" />
            <arg value="-n" />
            <arg value="--force" />
        </exec>
        <exec executable="php">
            <arg value="app/console" />
            <arg value="doctrine:database:create" />
            <arg value="-n" />
        </exec>
        <exec executable="php">
            <arg value="app/console" />
            <arg value="doctrine:schema:update" />
            <arg value="-n" />
            <arg value="--complete" />
            <arg value="--force" />
        </exec>
    </target>
</project>
